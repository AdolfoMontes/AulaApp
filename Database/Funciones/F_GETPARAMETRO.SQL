CREATE OR REPLACE FUNCTION F_GETPARAMETRO(PARAMETRO_IN IN NUMBER) RETURN NUMBER
IS
    SQL_ERRORCODE INT;
    SQL_ERRORMESSAGE VARCHAR(1500);
    RETORNO NUMBER;
BEGIN
    SELECT VALOR INTO RETORNO FROM PARAMS WHERE ID_PARAM = PARAMETRO_IN;
    RETURN RETORNO;
EXCEPTION WHEN NO_DATA_FOUND THEN
    RETORNO:= -2;
    RETURN RETORNO;
WHEN OTHERS THEN
    SQL_ERRORMESSAGE:=SQLERRM;
    SQL_ERRORCODE:= SQLCODE;
    RETORNO:= -1;
    
    INSERT INTO ERROR(ID_ERROR, PROCESO, COD_ERROR, MENSAJE_ERROR, FECHA) VALUES
                    ((SELECT NVL(MAX(ID_ERROR), 0)+1 FROM ERROR), 'F_GETPARAMETRO',SQL_ERRORCODE,SQL_ERRORMESSAGE, CURRENT_TIMESTAMP );
    RETURN RETORNO;
    COMMIT;
END;