CREATE OR REPLACE PROCEDURE SP_INSERTARDIRECCION(DESCRIPCION_IN IN VARCHAR2,
												ID_COMUNA_IN IN NUMBER, RESULTADO_OUT OUT NUMBER)
IS 
BEGIN
	INSERT INTO DIRECCION(ID_DIRECCION, DESCRIPCION, ID_COMUNA) VALUES 
						( (SELECT NVL(MAX(ID_DIRECCION),0) +1 FROM DIRECCION), DESCRIPCION_IN, ID_COMUNA_IN)
                        RETURNING (SELECT NVL(MAX(ID_DIRECCION),0) +1 FROM DIRECCION) INTO RESULTADO_OUT;
    COMMIT;
EXCEPTION 
WHEN OTHERS THEN
    RESULTADO_OUT:=0;
    ROLLBACK;
END;