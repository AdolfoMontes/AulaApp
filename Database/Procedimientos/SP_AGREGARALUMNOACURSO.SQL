CREATE OR REPLACE PROCEDURE SP_AGREGARALUMNOACURSO(RUN_IN IN NUMBER, ID_CURSO_IN IN NUMBER, RESULTADO_OUT OUT NUMBER)
IS
    
    CURSOR ASIGNATURA_CUR IS
    SELECT ID_ASIGNATURA FROM ASIGNATURA WHERE ID_CURSO = ID_CURSO_IN; 
    FILA_VAR ASIGNATURA_CUR%ROWTYPE;
BEGIN
    UPDATE PERSONA SET ID_CURSO = ID_CURSO_IN WHERE RUN = RUN_IN;
    FOR FILA_VAR IN ASIGNATURA_CUR
    LOOP
        INSERT INTO PERSONA_ASIGNATURA(RUN, ID_ASIGNATURA) VALUES(RUN_IN, FILA_VAR.ID_ASIGNATURA);
    END LOOP;
    COMMIT;
    RESULTADO_OUT:= 0;
    
EXCEPTION
WHEN OTHERS THEN
    ROLLBACK;
    RESULTADO_OUT:= 1;
END;